---
layout: HTB
---

<p id="output">
<h1 style="text-align:center">The file you are trying to view is <div class="redtxt">ðŸ”’ Encrypted ðŸ”’</div></h1>
<p style="font-size:24px; text-align:center">
    Decryption Key:
    <input type="text" id="decryptionKey" value="0123456789abcdef0123456789abcdef" style="display: inline; width:240px; background:#111; border:1px solid #eaeaea; color:#B5E853">
    <input style="display: inline;" type="submit" value="Decrypt" onclick="Decrypt()">
</p>
</p>
<script>
	function Decrypt() {
		var link = window.location.href;
		var indx = link.indexOf("?file=");
		if (indx == -1) {
			alert("Nothing to decrypt!");
			return;
		}
		var file = link.substring(indx + 6);
		
		var xhr = new XMLHttpRequest();
		xhr.open("GET", file, false);
		console.log("Downloading File...");
		xhr.send();
		if (xhr.status != 200) {
			alert("File not found!");
			return;
		}
		var resp = xhr.responseText;
		
		var keytxt = document.getElementById("decryptionKey").value;
		if (keytxt.length != 32) {
			alert("Key Length must be 32 Characters.");
			return;
		}
		var key = [];
		for (i = 0; i < keytxt.length; i++)
			key.push(keytxt.charCodeAt(i));
		
		var txt = [];
		for (i = 0; i < resp.length; i++)
			txt.push(resp.charCodeAt(i));
			
		var CryptText = DecryptCTR(txt, key);
		console.log (CryptText);
		
		if (CryptText.substring(0, 23) != "<!--Valid Decryption-->") {
			alert("Invalid Key.");
		} else {
			alert("OK.");
		}
		//document.getElementById("output").innerHTML = "<h2>Output:</h2>\n<p style='word-wrap: break-word;'>" + CryptText + "</p>";
		//console.log("Text Decrypts as: " + DecryptCTR(aesjs.utils.hex.toBytes(CryptText), key));
	}
</script>
